$(document).on("turbolinks:load", function(){
  const mainImageId = "#js-main-image"
  const subImage1Id = "#js-sub-image-1"
  const subImage2Id = "#js-sub-image-2"

  function uploadImage(idName){
    $(idName + ' input[type=file]').change(function (){
      const file = $(this).prop('files')[0];
      if(file.type.match('image.*')) {
        setImage(file, idName);
      } else {
        alert("画像を選択してください");
      }
    });
  }

  function setImage(file, idName) {
    const reader = new FileReader();
    reader.onload = function() {
      $(idName + ' img').attr('src', reader.result);
      $(idName + ' img').addClass("image-preview")
    }
    reader.readAsDataURL(file);
  }

  uploadImage(mainImageId)
  uploadImage(subImage1Id)
  uploadImage(subImage2Id)
})
